# Obsidian ä»»åŠ¡ç®¡ç†ä¸ç•ªèŒ„æ—¶é’Ÿæ’ä»¶ - ä»£ç ä½¿ç”¨è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒæ¨¡å—è¯´æ˜](#æ ¸å¿ƒæ¨¡å—è¯´æ˜)
4. [è¿è¡Œç¯å¢ƒ](#è¿è¡Œç¯å¢ƒ)
5. [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
6. [åŠŸèƒ½è¯¦è§£](#åŠŸèƒ½è¯¦è§£)
7. [APIæ¥å£è¯´æ˜](#apiæ¥å£è¯´æ˜)
8. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
9. [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
10. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸º Obsidian å¼€å‘çš„ä»»åŠ¡ç®¡ç†å’Œç•ªèŒ„æ—¶é’Ÿæ’ä»¶ï¼Œé›†æˆäº† AI æ™ºèƒ½ä»»åŠ¡æ‹†åˆ†åŠŸèƒ½ã€‚æ’ä»¶æä¾›äº†å®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ”¯æŒé‡å¤æ€§ä»»åŠ¡å’Œä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œå¹¶é…å¤‡äº†ç•ªèŒ„å·¥ä½œæ³•è®¡æ—¶å™¨æ¥æé«˜å·¥ä½œæ•ˆç‡ã€‚

### ä¸»è¦ç‰¹æ€§

- **ğŸ“ ä»»åŠ¡ç®¡ç†**: æ”¯æŒé‡å¤æ€§ä»»åŠ¡ï¼ˆå¹´/æœˆ/å‘¨/æ—¥å‘¨æœŸï¼‰å’Œä¸€æ¬¡æ€§ä»»åŠ¡
- **ğŸ… ç•ªèŒ„æ—¶é’Ÿ**: é›†æˆç•ªèŒ„å·¥ä½œæ³•ï¼Œæ”¯æŒè‡ªå®šä¹‰å·¥ä½œå’Œä¼‘æ¯æ—¶é—´
- **ğŸ¤– AI æ™ºèƒ½æ‹†åˆ†**: é›†æˆ DeepSeek APIï¼Œè‡ªåŠ¨å°†å¤æ‚ä»»åŠ¡æ‹†åˆ†ä¸ºå­ä»»åŠ¡
- **ğŸ“Š è¿›åº¦è·Ÿè¸ª**: å®æ—¶è·Ÿè¸ªä»»åŠ¡è¿›åº¦å’Œå®ŒæˆçŠ¶æ€
- **ğŸ”” æ™ºèƒ½æé†’**: æ”¯æŒè‡ªå®šä¹‰æç¤ºéŸ³å’Œåˆ°æœŸæé†’
- **ğŸ“ æ–‡ä»¶ç®¡ç†**: è‡ªåŠ¨å½’æ¡£å·²å®Œæˆä»»åŠ¡åˆ°æŒ‡å®šæ–‡ä»¶å¤¹

## ğŸ“ é¡¹ç›®ç»“æ„

```
obsidian-yuhanbo-task/
â”œâ”€â”€ main.js                    # ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆ4007è¡Œï¼‰
â”œâ”€â”€ manifest.json              # æ’ä»¶æ¸…å•æ–‡ä»¶
â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ data.json                  # ç”¨æˆ·æ•°æ®é…ç½®æ–‡ä»¶
â”œâ”€â”€ styles.css                 # æ ·å¼æ–‡ä»¶ï¼ˆ412è¡Œï¼‰
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | å¤§å° | åŠŸèƒ½æè¿° |
|------|------|----------|
| `main.js` | 4007è¡Œ | æ ¸å¿ƒé€»è¾‘ï¼ŒåŒ…å«æ‰€æœ‰ç±»å’ŒåŠŸèƒ½å®ç° |
| `manifest.json` | 10è¡Œ | Obsidian æ’ä»¶å…ƒæ•°æ®é…ç½® |
| `package.json` | 9è¡Œ | NPM åŒ…é…ç½®ä¿¡æ¯ |
| `data.json` | 16è¡Œ | ç”¨æˆ·ä¸ªæ€§åŒ–è®¾ç½®æ•°æ® |
| `styles.css` | 412è¡Œ | UI æ ·å¼å®šä¹‰ |
| `README.md` | 64è¡Œ | ç”¨æˆ·ä½¿ç”¨è¯´æ˜ |

## ğŸ—ï¸ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. YuhanboTaskPlugin (ä¸»æ’ä»¶ç±»)

**ä½ç½®**: `main.js:47-385`  
**åŠŸèƒ½**: æ’ä»¶çš„å…¥å£ç‚¹ï¼Œè´Ÿè´£åˆå§‹åŒ–å’Œåè°ƒå„ä¸ªæ¨¡å—

```javascript
class YuhanboTaskPlugin extends Plugin {
    async onload() {
        // åŠ è½½è®¾ç½®ã€åˆå§‹åŒ–ç®¡ç†å™¨ã€æ³¨å†Œå‘½ä»¤ç­‰
    }
    
    async onunload() {
        // æ¸…ç†èµ„æºã€åœæ­¢å®šæ—¶å™¨ç­‰
    }
}
```

**æ ¸å¿ƒæ–¹æ³•**:
- `onload()`: æ’ä»¶åŠ è½½æ—¶çš„åˆå§‹åŒ–é€»è¾‘
- `onunload()`: æ’ä»¶å¸è½½æ—¶çš„æ¸…ç†é€»è¾‘
- `saveSettings()`: ä¿å­˜ç”¨æˆ·è®¾ç½®
- `resetTaskSystem()`: é‡ç½®ä»»åŠ¡ç³»ç»Ÿ
- `startDailyCleanupTimer()`: å¯åŠ¨æ¯æ—¥æ¸…ç†å®šæ—¶å™¨
- `performDailyCleanup()`: æ‰§è¡Œæ¯æ—¥æ¸…ç†ä»»åŠ¡

### 2. TaskManager (ä»»åŠ¡ç®¡ç†å™¨)

**ä½ç½®**: `main.js:1180-2531`  
**åŠŸèƒ½**: æ ¸å¿ƒä»»åŠ¡ç®¡ç†é€»è¾‘ï¼Œå¤„ç†ä»»åŠ¡çš„å¢åˆ æ”¹æŸ¥

```javascript
class TaskManager {
    constructor(plugin) {
        this.plugin = plugin;
        this.tasks = {
            repeating: [],    // é‡å¤æ€§ä»»åŠ¡
            oneTime: [],      // ä¸€æ¬¡æ€§ä»»åŠ¡
            completed: []     // å·²å®Œæˆä»»åŠ¡
        };
    }
}
```

**æ ¸å¿ƒæ–¹æ³•**:
- `createTask(taskData)`: åˆ›å»ºæ–°ä»»åŠ¡
- `updateTask(taskId, updates)`: æ›´æ–°ä»»åŠ¡çŠ¶æ€
- `deleteTask(taskId)`: åˆ é™¤ä»»åŠ¡
- `getAllActiveTasks()`: è·å–æ‰€æœ‰æ´»è·ƒä»»åŠ¡
- `loadTasks()`: ä»æ–‡ä»¶åŠ è½½ä»»åŠ¡
- `saveTasks()`: ä¿å­˜ä»»åŠ¡åˆ°æ–‡ä»¶
- `filterRepeatingTasks()`: è¿‡æ»¤é‡å¤æ€§ä»»åŠ¡æ˜¾ç¤º
- `cleanupExpiredRepeatingTasks()`: æ¸…ç†è¿‡æœŸé‡å¤æ€§ä»»åŠ¡

### 3. PomodoroTimer (ç•ªèŒ„æ—¶é’Ÿ)

**ä½ç½®**: `main.js:386-737`  
**åŠŸèƒ½**: ç•ªèŒ„å·¥ä½œæ³•è®¡æ—¶å™¨å®ç°

```javascript
class PomodoroTimer {
    constructor(plugin) {
        this.plugin = plugin;
        this.state = PomodoroState.IDLE;
        this.timeRemaining = 0;
        this.currentTask = null;
    }
}
```

**æ ¸å¿ƒæ–¹æ³•**:
- `startWorkWithTaskSelection()`: å¼€å§‹å·¥ä½œå¹¶é€‰æ‹©ä»»åŠ¡
- `startWork(task)`: å¼€å§‹å·¥ä½œè®¡æ—¶
- `startBreak()`: å¼€å§‹ä¼‘æ¯è®¡æ—¶
- `pause()`: æš‚åœè®¡æ—¶å™¨
- `resume()`: æ¢å¤è®¡æ—¶å™¨
- `stop()`: åœæ­¢è®¡æ—¶å™¨
- `playSound()`: æ’­æ”¾æç¤ºéŸ³

### 4. Modal ç±»æ— (ç”¨æˆ·ç•Œé¢)

#### TaskSelectionModal (ä»»åŠ¡é€‰æ‹©å¼¹çª—)
**ä½ç½®**: `main.js:2532-2675`  
**åŠŸèƒ½**: ç•ªèŒ„æ—¶é’Ÿå¼€å§‹å‰çš„ä»»åŠ¡é€‰æ‹©ç•Œé¢

#### TaskProgressModal (ä»»åŠ¡è¿›åº¦å¼¹çª—)
**ä½ç½®**: `main.js:2676-2824`  
**åŠŸèƒ½**: ä»»åŠ¡è¿›åº¦æ›´æ–°ç•Œé¢

#### TaskModal (ä»»åŠ¡åˆ›å»º/ç¼–è¾‘å¼¹çª—)
**ä½ç½®**: `main.js:2825-3584`  
**åŠŸèƒ½**: ä»»åŠ¡åˆ›å»ºå’Œç¼–è¾‘çš„ä¸»ç•Œé¢

#### TaskListModal (ä»»åŠ¡åˆ—è¡¨å¼¹çª—)
**ä½ç½®**: `main.js:3585-4007`  
**åŠŸèƒ½**: ä»»åŠ¡åˆ—è¡¨æŸ¥çœ‹å’Œç®¡ç†ç•Œé¢

### 5. YuhanboTaskSettingTab (è®¾ç½®é¡µé¢)

**ä½ç½®**: `main.js:738-1179`  
**åŠŸèƒ½**: æ’ä»¶è®¾ç½®ç•Œé¢

**è®¾ç½®é¡¹**:
- API é…ç½® (DeepSeek API Key)
- ä»»åŠ¡æ–‡ä»¶å¤¹è·¯å¾„é…ç½®
- ç•ªèŒ„æ—¶é’Ÿæ—¶é—´é…ç½®
- æç¤ºéŸ³è®¾ç½®
- AI åŠŸèƒ½å¼€å…³

## ğŸ”§ è¿è¡Œç¯å¢ƒ

### åŸºç¡€è¦æ±‚

- **Obsidian**: ç‰ˆæœ¬ 0.15.0 æˆ–æ›´é«˜
- **æ“ä½œç³»ç»Ÿ**: Windows / macOS / Linux
- **Node.js**: ä¸éœ€è¦ï¼ˆæ’ä»¶è¿è¡Œåœ¨ Obsidian ç¯å¢ƒä¸­ï¼‰

### ä¾èµ–é¡¹

æ’ä»¶ä½¿ç”¨ Obsidian å†…ç½®çš„ä¾èµ–é¡¹ï¼š

```javascript
const { Plugin, Notice, PluginSettingTab, Setting, Modal, moment, normalizePath } = require('obsidian');
```

- `Plugin`: Obsidian æ’ä»¶åŸºç±»
- `Notice`: é€šçŸ¥ç»„ä»¶
- `PluginSettingTab`: è®¾ç½®é¡µé¢åŸºç±»
- `Setting`: è®¾ç½®é¡¹ç»„ä»¶
- `Modal`: å¼¹çª—åŸºç±»
- `moment`: æ—¥æœŸå¤„ç†åº“
- `normalizePath`: è·¯å¾„æ ‡å‡†åŒ–å·¥å…·

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨å®‰è£…

1. **ä¸‹è½½æ’ä»¶æ–‡ä»¶**
   ```bash
   # å°†æ’ä»¶æ–‡ä»¶å¤åˆ¶åˆ° Obsidian æ’ä»¶ç›®å½•
   .obsidian/plugins/obsidian-yuhanbo-task/
   â”œâ”€â”€ main.js
   â”œâ”€â”€ manifest.json
   â”œâ”€â”€ styles.css
   â””â”€â”€ data.json
   ```

2. **å¯ç”¨æ’ä»¶**
   - æ‰“å¼€ Obsidian è®¾ç½®
   - è¿›å…¥"ç¬¬ä¸‰æ–¹æ’ä»¶"é¡µé¢
   - æ‰¾åˆ°"yuhanbo-task"æ’ä»¶å¹¶å¯ç”¨

### æ–¹æ³•äºŒï¼šå¼€å‘æ¨¡å¼å®‰è£…

1. **å…‹éš†ä»£ç **
   ```bash
   cd .obsidian/plugins/
   git clone [repository-url] obsidian-yuhanbo-task
   ```

2. **é‡å¯ Obsidian**
   - é‡å¯ Obsidian åº”ç”¨
   - åœ¨è®¾ç½®ä¸­å¯ç”¨æ’ä»¶

### åˆå§‹åŒ–é…ç½®

æ’ä»¶é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ï¼š

1. **åˆ›å»ºä»»åŠ¡æ–‡ä»¶å¤¹ç»“æ„**
   ```
   Tasks/
   â”œâ”€â”€ Repeating/          # é‡å¤æ€§ä»»åŠ¡
   â”‚   â”œâ”€â”€ repeating_yearly.md
   â”‚   â”œâ”€â”€ repeating_monthly.md
   â”‚   â”œâ”€â”€ repeating_weekly.md
   â”‚   â””â”€â”€ repeating_daily.md
   â”œâ”€â”€ OneTime/            # ä¸€æ¬¡æ€§ä»»åŠ¡
   â”‚   â””â”€â”€ onetime_tasks.md
   â””â”€â”€ Completed/          # å·²å®Œæˆä»»åŠ¡
       â””â”€â”€ completed_tasks.md
   ```

2. **åˆå§‹åŒ–é»˜è®¤è®¾ç½®**
   - å·¥ä½œæ—¶é—´ï¼š25åˆ†é’Ÿ
   - çŸ­ä¼‘æ¯ï¼š5åˆ†é’Ÿ
   - é•¿ä¼‘æ¯ï¼š15åˆ†é’Ÿ
   - é•¿ä¼‘æ¯é—´éš”ï¼š4ä¸ªå·¥ä½œå‘¨æœŸ

## âš™ï¸ åŠŸèƒ½è¯¦è§£

### 1. ä»»åŠ¡ç®¡ç†åŠŸèƒ½

#### ä»»åŠ¡ç±»å‹

**ä¸€æ¬¡æ€§ä»»åŠ¡**
- åªéœ€è¦å®Œæˆä¸€æ¬¡çš„ä»»åŠ¡
- å®Œæˆåè‡ªåŠ¨å½’æ¡£åˆ°"å·²å®Œæˆä»»åŠ¡"æ–‡ä»¶å¤¹
- æ”¯æŒè¿›åº¦è·Ÿè¸ªï¼ˆ0-100%ï¼‰

**é‡å¤æ€§ä»»åŠ¡**
- æ”¯æŒå››ç§å‘¨æœŸï¼šå¹´ã€æœˆã€å‘¨ã€æ—¥
- æ¯ä¸ªå‘¨æœŸåªæ˜¾ç¤ºå½“å‰åº”è¯¥æ‰§è¡Œçš„ä»»åŠ¡
- å®Œæˆå½“æœŸä»»åŠ¡åï¼Œä¸‹ä¸ªå‘¨æœŸè‡ªåŠ¨é‡æ–°æ˜¾ç¤º

#### ä»»åŠ¡å±æ€§

```javascript
const task = {
    id: "unique-task-id",           // å”¯ä¸€æ ‡è¯†ç¬¦
    title: "ä»»åŠ¡æ ‡é¢˜",               // ä»»åŠ¡åç§°
    description: "ä»»åŠ¡æè¿°",         // è¯¦ç»†æè¿°
    type: "repeating|oneTime",      // ä»»åŠ¡ç±»å‹
    progress: 0,                    // è¿›åº¦ç™¾åˆ†æ¯” (0-100)
    isCompleted: false,             // æ˜¯å¦å®Œæˆ
    createdDate: "2024-01-01",      // åˆ›å»ºæ—¥æœŸ
    dueDate: "2024-12-31",          // æˆªæ­¢æ—¥æœŸ
    executeDate: "2024-01-01",      // æ‰§è¡Œæ—¥æœŸ
    cycle: "daily|weekly|monthly|yearly", // é‡å¤å‘¨æœŸ
    cyclePeriod: 1,                 // å‘¨æœŸé—´éš”
    tags: ["å·¥ä½œ", "é‡è¦"],          // æ ‡ç­¾
    subTasks: [                     // å­ä»»åŠ¡
        {
            completed: false,
            text: "å­ä»»åŠ¡å†…å®¹"
        }
    ]
};
```

#### æ™ºèƒ½è¿‡æ»¤é€»è¾‘

**é‡å¤æ€§ä»»åŠ¡è¿‡æ»¤è§„åˆ™**:

1. **è¿‡æœŸä»»åŠ¡**: è¶…è¿‡æˆªæ­¢æ—¥æœŸçš„ä»»åŠ¡ä¸æ˜¾ç¤º
2. **å‘¨æœŸåˆ¤æ–­**: åªæ˜¾ç¤ºå½“å‰å‘¨æœŸåº”è¯¥æ‰§è¡Œçš„ä»»åŠ¡
3. **å®ŒæˆçŠ¶æ€**: å·²å®Œæˆå½“æœŸçš„ä»»åŠ¡éšè—ï¼Œç›´åˆ°ä¸‹ä¸ªå‘¨æœŸ

```javascript
/**
 * è¿‡æ»¤é‡å¤æ€§ä»»åŠ¡çš„æ˜¾ç¤ºé€»è¾‘
 * @param {Array} tasks - é‡å¤æ€§ä»»åŠ¡æ•°ç»„
 * @returns {Array} è¿‡æ»¤åçš„ä»»åŠ¡æ•°ç»„
 */
filterRepeatingTasks(tasks) {
    const today = new Date().toISOString().split('T')[0];
    
    return tasks.filter(task => {
        // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if (task.dueDate && task.dueDate < today) {
            return false;
        }
        
        // æ£€æŸ¥æ˜¯å¦åº”è¯¥åœ¨ä»Šå¤©æ˜¾ç¤º
        if (!this.isTaskDueToday(task)) {
            return false;
        }
        
        // æ£€æŸ¥æ˜¯å¦å·²å®Œæˆå½“æœŸ
        if (task.executeDate === today && task.isCompleted) {
            return false;
        }
        
        return true;
    });
}
```

### 2. ç•ªèŒ„æ—¶é’ŸåŠŸèƒ½

#### å·¥ä½œæµç¨‹

1. **ä»»åŠ¡é€‰æ‹©**: ä»æ´»è·ƒä»»åŠ¡ä¸­é€‰æ‹©è¦æ‰§è¡Œçš„ä»»åŠ¡
2. **å·¥ä½œè®¡æ—¶**: å¼€å§‹å·¥ä½œå€’è®¡æ—¶ï¼ˆé»˜è®¤25åˆ†é’Ÿï¼‰
3. **ä¼‘æ¯æé†’**: å·¥ä½œç»“æŸåæç¤ºä¼‘æ¯
4. **è¿›åº¦æ›´æ–°**: å¯é€‰æ‹©æ›´æ–°ä»»åŠ¡è¿›åº¦

#### çŠ¶æ€ç®¡ç†

```javascript
const PomodoroState = {
    IDLE: "idle",           // ç©ºé—²çŠ¶æ€
    WORKING: "working",     // å·¥ä½œä¸­
    SHORT_BREAK: "shortBreak", // çŸ­ä¼‘æ¯
    LONG_BREAK: "longBreak",   // é•¿ä¼‘æ¯
    PAUSED: "paused"        // æš‚åœçŠ¶æ€
};
```

#### è®¡æ—¶å™¨é€»è¾‘

```javascript
/**
 * å¼€å§‹å·¥ä½œè®¡æ—¶
 * @param {Object} task - é€‰æ‹©çš„ä»»åŠ¡å¯¹è±¡
 */
async startWork(task) {
    this.currentTask = task;
    this.state = PomodoroState.WORKING;
    this.timeRemaining = this.plugin.settings.workDuration * 60;
    
    // æ›´æ–°çŠ¶æ€æ æ˜¾ç¤º
    this.updateStatusBar();
    
    // å¼€å§‹å€’è®¡æ—¶
    this.startTimer();
}
```

### 3. AI æ™ºèƒ½æ‹†åˆ†åŠŸèƒ½

#### DeepSeek API é›†æˆ

æ’ä»¶é›†æˆäº† DeepSeek API æ¥å®ç°ä»»åŠ¡çš„æ™ºèƒ½æ‹†åˆ†ï¼š

```javascript
/**
 * è°ƒç”¨ AI API æ‹†åˆ†ä»»åŠ¡
 * @param {string} taskTitle - ä»»åŠ¡æ ‡é¢˜
 * @param {string} taskDescription - ä»»åŠ¡æè¿°
 * @returns {Array} å­ä»»åŠ¡æ•°ç»„
 */
async generateSubTasks(taskTitle, taskDescription) {
    const apiKey = this.plugin.settings.apiKey;
    const prompt = `è¯·å°†ä»¥ä¸‹ä»»åŠ¡æ‹†åˆ†ä¸ºå…·ä½“çš„å­ä»»åŠ¡ï¼š
    ä»»åŠ¡æ ‡é¢˜ï¼š${taskTitle}
    ä»»åŠ¡æè¿°ï¼š${taskDescription}
    
    è¯·è¿”å›JSONæ ¼å¼çš„å­ä»»åŠ¡åˆ—è¡¨ã€‚`;
    
    const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
            model: 'deepseek-chat',
            messages: [{ role: 'user', content: prompt }]
        })
    });
    
    // å¤„ç†å“åº”å¹¶è¿”å›å­ä»»åŠ¡
    return this.parseSubTasks(response);
}
```

### 4. æ•°æ®æŒä¹…åŒ–

#### æ–‡ä»¶å­˜å‚¨æ ¼å¼

ä»»åŠ¡æ•°æ®ä»¥ Markdown æ ¼å¼å­˜å‚¨åœ¨ç”¨æˆ·çš„ç¬”è®°åº“ä¸­ï¼š

```markdown
## ä»»åŠ¡æ ‡é¢˜

- ID: task-20240101-001
- æè¿°: ä»»åŠ¡çš„è¯¦ç»†æè¿°
- ç±»å‹: é‡å¤æ€§ä»»åŠ¡
- è¿›åº¦: 50%
- åˆ›å»ºæ—¥æœŸ: 2024-01-01
- æˆªæ­¢æ—¥æœŸ: 2024-12-31
- æ‰§è¡Œæ—¥æœŸ: 2024-01-01
- å‘¨æœŸ: daily
- å‘¨æœŸå•ä½: 1
- æ ‡ç­¾: å·¥ä½œ, é‡è¦
- å­ä»»åŠ¡:
    - [x] å·²å®Œæˆçš„å­ä»»åŠ¡
    - [ ] æœªå®Œæˆçš„å­ä»»åŠ¡

---
```

#### è‡ªåŠ¨å¤‡ä»½æœºåˆ¶

- **å®æ—¶ä¿å­˜**: ä»»åŠ¡çŠ¶æ€å˜æ›´æ—¶è‡ªåŠ¨ä¿å­˜
- **æ–‡ä»¶åŒæ­¥**: åˆ©ç”¨ Obsidian çš„æ–‡ä»¶åŒæ­¥åŠŸèƒ½
- **ç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒ Git ç­‰ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

## ğŸ”Œ APIæ¥å£è¯´æ˜

### TaskManager API

#### åˆ›å»ºä»»åŠ¡

```javascript
/**
 * åˆ›å»ºæ–°ä»»åŠ¡
 * @param {Object} taskData - ä»»åŠ¡æ•°æ®å¯¹è±¡
 * @returns {Promise<Object>} åˆ›å»ºçš„ä»»åŠ¡å¯¹è±¡
 */
async createTask(taskData) {
    // ç”Ÿæˆå”¯ä¸€ID
    taskData.id = this.generateTaskId();
    
    // è®¾ç½®é»˜è®¤å€¼
    taskData.createdDate = new Date().toISOString().split('T')[0];
    taskData.progress = taskData.progress || 0;
    taskData.isCompleted = false;
    
    // æ·»åŠ åˆ°å¯¹åº”åˆ—è¡¨
    if (taskData.type === 'repeating') {
        this.tasks.repeating.push(taskData);
    } else {
        this.tasks.oneTime.push(taskData);
    }
    
    // ä¿å­˜åˆ°æ–‡ä»¶
    await this.saveTasks();
    
    return taskData;
}
```

#### æ›´æ–°ä»»åŠ¡

```javascript
/**
 * æ›´æ–°ä»»åŠ¡çŠ¶æ€
 * @param {string} taskId - ä»»åŠ¡ID
 * @param {Object} updates - æ›´æ–°çš„å­—æ®µ
 * @returns {Promise<boolean>} æ›´æ–°æ˜¯å¦æˆåŠŸ
 */
async updateTask(taskId, updates) {
    const task = this.getTaskById(taskId);
    if (!task) {
        throw new Error(`æœªæ‰¾åˆ°ä»»åŠ¡ ID: ${taskId}`);
    }
    
    // åˆå¹¶æ›´æ–°å­—æ®µ
    Object.assign(task, updates);
    
    // å¤„ç†å®ŒæˆçŠ¶æ€
    if (updates.isCompleted) {
        await this.handleTaskCompletion(task);
    }
    
    // ä¿å­˜æ›´æ”¹
    await this.saveTasks();
    
    return true;
}
```

#### æŸ¥è¯¢ä»»åŠ¡

```javascript
/**
 * è·å–æ‰€æœ‰æ´»è·ƒä»»åŠ¡
 * @returns {Array} æ´»è·ƒä»»åŠ¡åˆ—è¡¨
 */
getAllActiveTasks() {
    // è·å–æœªå®Œæˆçš„ä¸€æ¬¡æ€§ä»»åŠ¡
    const oneTimeTasks = this.tasks.oneTime.filter(task => !task.isCompleted);
    
    // è·å–è¿‡æ»¤åçš„é‡å¤æ€§ä»»åŠ¡
    const filteredRepeatingTasks = this.filterRepeatingTasksForSelection(this.tasks.repeating);
    
    return [...filteredRepeatingTasks, ...oneTimeTasks];
}
```

### PomodoroTimer API

#### å¼€å§‹ç•ªèŒ„æ—¶é’Ÿ

```javascript
/**
 * å¼€å§‹ç•ªèŒ„æ—¶é’Ÿå¹¶é€‰æ‹©ä»»åŠ¡
 */
startWorkWithTaskSelection() {
    new TaskSelectionModal(this.plugin.app, this.plugin, (task) => {
        if (task) {
            this.startWork(task);
        }
    }).open();
}
```

#### æ§åˆ¶è®¡æ—¶å™¨

```javascript
// æš‚åœè®¡æ—¶å™¨
pause() {
    if (this.state !== PomodoroState.IDLE) {
        this.previousState = this.state;
        this.state = PomodoroState.PAUSED;
        this.stopTimer();
        this.updateStatusBar();
    }
}

// æ¢å¤è®¡æ—¶å™¨
resume() {
    if (this.state === PomodoroState.PAUSED) {
        this.state = this.previousState;
        this.startTimer();
        this.updateStatusBar();
    }
}

// åœæ­¢è®¡æ—¶å™¨
stop() {
    this.state = PomodoroState.IDLE;
    this.currentTask = null;
    this.timeRemaining = 0;
    this.stopTimer();
    this.updateStatusBar();
}
```

## âš™ï¸ é…ç½®è¯´æ˜

### data.json é…ç½®æ–‡ä»¶

```json
{
  "apiKey": "sk-xxxxxxxxxx",              // DeepSeek APIå¯†é’¥
  "promptFilePath": "",                   // è‡ªå®šä¹‰æç¤ºè¯æ–‡ä»¶è·¯å¾„
  "repeatingTasksPath": "Tasks/Repeating", // é‡å¤æ€§ä»»åŠ¡æ–‡ä»¶å¤¹
  "oneTimeTasksPath": "Tasks/OneTime",    // ä¸€æ¬¡æ€§ä»»åŠ¡æ–‡ä»¶å¤¹
  "completedTasksPath": "Tasks/Completed", // å·²å®Œæˆä»»åŠ¡æ–‡ä»¶å¤¹
  "workDuration": 25,                     // å·¥ä½œæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  "shortBreakDuration": 5,                // çŸ­ä¼‘æ¯æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  "longBreakDuration": 15,                // é•¿ä¼‘æ¯æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  "longBreakInterval": 4,                 // é•¿ä¼‘æ¯é—´éš”ï¼ˆå·¥ä½œå‘¨æœŸæ•°ï¼‰
  "soundEnabled": true,                   // æ˜¯å¦å¯ç”¨æç¤ºéŸ³
  "soundFilePath": "path/to/sound.mp3",   // è‡ªå®šä¹‰æç¤ºéŸ³æ–‡ä»¶è·¯å¾„
  "aiEnabled": true,                      // æ˜¯å¦å¯ç”¨AIåŠŸèƒ½
  "aiModel": "deepseek-chat",             // AIæ¨¡å‹åç§°
  "showRemainingDays": true               // æ˜¯å¦æ˜¾ç¤ºå‰©ä½™å¤©æ•°
}
```

### ç¯å¢ƒå˜é‡é…ç½®

å¦‚æœéœ€è¦åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¯ä»¥è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# DeepSeek API é…ç½®
export DEEPSEEK_API_KEY="your-api-key"
export DEEPSEEK_API_URL="https://api.deepseek.com/v1/chat/completions"

# è°ƒè¯•æ¨¡å¼
export DEBUG_MODE=true
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„è¯´æ˜

#### 1. å¸¸é‡å®šä¹‰

```javascript
// é»˜è®¤è®¾ç½®
const DEFAULT_SETTINGS = {
    // é…ç½®é¡¹å®šä¹‰
};

// çŠ¶æ€æšä¸¾
const PomodoroState = {
    IDLE: "idle",
    WORKING: "working",
    // ...
};

// ä»»åŠ¡ç±»å‹æšä¸¾
const TaskType = {
    REPEATING: "repeating",
    ONE_TIME: "oneTime"
};
```

#### 2. ç±»ç»§æ‰¿å…³ç³»

```
Plugin (Obsidian)
â””â”€â”€ YuhanboTaskPlugin
    â”œâ”€â”€ TaskManager
    â”œâ”€â”€ PomodoroTimer
    â””â”€â”€ YuhanboTaskSettingTab (extends PluginSettingTab)

Modal (Obsidian)
â”œâ”€â”€ TaskSelectionModal
â”œâ”€â”€ TaskProgressModal
â”œâ”€â”€ TaskModal
â””â”€â”€ TaskListModal
```

#### 3. äº‹ä»¶å¤„ç†æœºåˆ¶

```javascript
// å‘½ä»¤æ³¨å†Œ
this.addCommand({
    id: 'start-pomodoro',
    name: 'å¼€å§‹ç•ªèŒ„æ—¶é’Ÿ',
    callback: () => {
        this.pomodoroTimer.startWorkWithTaskSelection();
    }
});

// ä¾§è¾¹æ æŒ‰é’®
this.addRibbonIcon('clock', 'å¼€å§‹ç•ªèŒ„æ—¶é’Ÿ', () => {
    this.pomodoroTimer.startWorkWithTaskSelection();
});
```

### æ‰©å±•å¼€å‘

#### æ·»åŠ æ–°çš„ä»»åŠ¡ç±»å‹

1. **æ‰©å±• TaskType æšä¸¾**
   ```javascript
   const TaskType = {
       REPEATING: "repeating",
       ONE_TIME: "oneTime",
       PROJECT: "project"  // æ–°å¢é¡¹ç›®ç±»å‹
   };
   ```

2. **ä¿®æ”¹ä»»åŠ¡åˆ›å»ºé€»è¾‘**
   ```javascript
   // åœ¨ TaskModal ä¸­æ·»åŠ æ–°çš„é€‰é¡¹
   const typeOptions = [
       { value: "repeating", text: "é‡å¤æ€§ä»»åŠ¡" },
       { value: "oneTime", text: "ä¸€æ¬¡æ€§ä»»åŠ¡" },
       { value: "project", text: "é¡¹ç›®ä»»åŠ¡" }  // æ–°å¢
   ];
   ```

3. **å®ç°ç‰¹å®šé€»è¾‘**
   ```javascript
   // åœ¨ TaskManager ä¸­æ·»åŠ é¡¹ç›®ä»»åŠ¡å¤„ç†é€»è¾‘
   handleProjectTask(task) {
       // é¡¹ç›®ä»»åŠ¡ç‰¹å®šé€»è¾‘
   }
   ```

#### æ·»åŠ æ–°çš„ AI æ¨¡å‹æ”¯æŒ

1. **æ‰©å±•æ¨¡å‹é…ç½®**
   ```javascript
   const AI_MODELS = {
       DEEPSEEK: "deepseek-chat",
       GPT4: "gpt-4",
       CLAUDE: "claude-3"
   };
   ```

2. **å®ç°æ¨¡å‹é€‚é…å™¨**
   ```javascript
   class AIModelAdapter {
       static async callAPI(model, prompt) {
           switch(model) {
               case AI_MODELS.DEEPSEEK:
                   return this.callDeepSeek(prompt);
               case AI_MODELS.GPT4:
                   return this.callOpenAI(prompt);
               // ...
           }
       }
   }
   ```

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è°ƒè¯•æ—¥å¿—

```javascript
// åœ¨ä»£ç ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯
console.log(`ã€è°ƒè¯•ã€‘ä»»åŠ¡åˆ›å»º: ${task.title}`, task);
console.error(`ã€é”™è¯¯ã€‘ä»»åŠ¡æ›´æ–°å¤±è´¥: ${error.message}`);
```

#### 2. ä½¿ç”¨ Obsidian å¼€å‘è€…å·¥å…·

- æŒ‰ `Ctrl+Shift+I` (Windows) æˆ– `Cmd+Option+I` (Mac) æ‰“å¼€å¼€å‘è€…å·¥å…·
- åœ¨ Console é¢æ¿æŸ¥çœ‹æ—¥å¿—è¾“å‡º
- ä½¿ç”¨ Sources é¢æ¿è®¾ç½®æ–­ç‚¹è°ƒè¯•

#### 3. ä»»åŠ¡æ•°æ®æ£€æŸ¥

```javascript
// åœ¨æ§åˆ¶å°ä¸­æ£€æŸ¥ä»»åŠ¡æ•°æ®
app.plugins.plugins['obsidian-yuhanbo-task'].taskManager.tasks
```

## â“ å¸¸è§é—®é¢˜

### 1. å®‰è£…å’Œé…ç½®é—®é¢˜

**Q: æ’ä»¶æ— æ³•åŠ è½½æ€ä¹ˆåŠï¼Ÿ**

A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- ç¡®è®¤ Obsidian ç‰ˆæœ¬ â‰¥ 0.15.0
- æ£€æŸ¥æ’ä»¶æ–‡ä»¶æ˜¯å¦å®Œæ•´
- æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- å°è¯•é‡å¯ Obsidian

**Q: ä»»åŠ¡æ–‡ä»¶å¤¹åˆ›å»ºå¤±è´¥ï¼Ÿ**

A: å¯èƒ½çš„åŸå› ï¼š
- æ–‡ä»¶å¤¹è·¯å¾„åŒ…å«ç‰¹æ®Šå­—ç¬¦
- ç£ç›˜ç©ºé—´ä¸è¶³
- æƒé™ä¸è¶³

è§£å†³æ–¹æ¡ˆï¼š
```javascript
// æ‰‹åŠ¨é‡ç½®ä»»åŠ¡ç³»ç»Ÿ
app.plugins.plugins['obsidian-yuhanbo-task'].resetTaskSystem()
```

### 2. åŠŸèƒ½ä½¿ç”¨é—®é¢˜

**Q: é‡å¤æ€§ä»»åŠ¡ä¸æ˜¾ç¤ºï¼Ÿ**

A: æ£€æŸ¥ä»¥ä¸‹è®¾ç½®ï¼š
- ä»»åŠ¡æ˜¯å¦è®¾ç½®äº†æ­£ç¡®çš„æ‰§è¡Œæ—¥æœŸ
- ä»»åŠ¡æ˜¯å¦å·²è¿‡æˆªæ­¢æ—¥æœŸ
- å½“å‰æ—¥æœŸæ˜¯å¦åœ¨ä»»åŠ¡çš„æ‰§è¡Œå‘¨æœŸå†…

**Q: AI æ‹†åˆ†åŠŸèƒ½ä¸å·¥ä½œï¼Ÿ**

A: ç¡®è®¤ä»¥ä¸‹é…ç½®ï¼š
- DeepSeek API Key æ˜¯å¦æ­£ç¡®
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- API é…é¢æ˜¯å¦å……è¶³

### 3. æ€§èƒ½é—®é¢˜

**Q: æ’ä»¶è¿è¡Œç¼“æ…¢ï¼Ÿ**

A: ä¼˜åŒ–å»ºè®®ï¼š
- å®šæœŸæ¸…ç†å·²å®Œæˆçš„ä»»åŠ¡
- å‡å°‘åŒæ—¶æ˜¾ç¤ºçš„ä»»åŠ¡æ•°é‡
- æ£€æŸ¥æ˜¯å¦æœ‰å¤§é‡å­ä»»åŠ¡

**Q: å†…å­˜å ç”¨è¿‡é«˜ï¼Ÿ**

A: å¯èƒ½åŸå› ï¼š
- ä»»åŠ¡æ•°æ®è¿‡å¤š
- å®šæ—¶å™¨æœªæ­£ç¡®æ¸…ç†
- äº‹ä»¶ç›‘å¬å™¨æ³„æ¼

è§£å†³æ–¹æ¡ˆï¼š
```javascript
// æ¸…ç†è¿‡æœŸä»»åŠ¡
app.plugins.plugins['obsidian-yuhanbo-task'].taskManager.cleanupExpiredRepeatingTasks()
```

### 4. æ•°æ®å®‰å…¨é—®é¢˜

**Q: å¦‚ä½•å¤‡ä»½ä»»åŠ¡æ•°æ®ï¼Ÿ**

A: ä»»åŠ¡æ•°æ®å­˜å‚¨åœ¨ä»¥ä¸‹ä½ç½®ï¼š
- é‡å¤æ€§ä»»åŠ¡ï¼š`Tasks/Repeating/` æ–‡ä»¶å¤¹
- ä¸€æ¬¡æ€§ä»»åŠ¡ï¼š`Tasks/OneTime/` æ–‡ä»¶å¤¹
- å·²å®Œæˆä»»åŠ¡ï¼š`Tasks/Completed/` æ–‡ä»¶å¤¹

å»ºè®®ä½¿ç”¨ Obsidian çš„åŒæ­¥åŠŸèƒ½æˆ– Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚

**Q: æ•°æ®ä¸¢å¤±å¦‚ä½•æ¢å¤ï¼Ÿ**

A: æ¢å¤æ­¥éª¤ï¼š
1. æ£€æŸ¥ Obsidian çš„å¤‡ä»½æ–‡ä»¶
2. ä»åŒæ­¥æœåŠ¡æ¢å¤
3. ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå›æ»š
4. é‡æ–°å¯¼å…¥ä»»åŠ¡æ•°æ®

### 5. å¼€å‘ç›¸å…³é—®é¢˜

**Q: å¦‚ä½•ä¿®æ”¹æ’ä»¶ä»£ç ï¼Ÿ**

A: å¼€å‘æµç¨‹ï¼š
1. ä¿®æ”¹ `main.js` æ–‡ä»¶
2. é‡å¯ Obsidian æˆ–é‡æ–°åŠ è½½æ’ä»¶
3. æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
4. æäº¤ä»£ç æ›´æ”¹

**Q: å¦‚ä½•æ·»åŠ æ–°åŠŸèƒ½ï¼Ÿ**

A: å‚è€ƒå¼€å‘æŒ‡å—éƒ¨åˆ†ï¼ŒæŒ‰ç…§ç°æœ‰çš„ä»£ç ç»“æ„è¿›è¡Œæ‰©å±•ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**: æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
2. **é‡ç½®ç³»ç»Ÿ**: ä½¿ç”¨"é‡ç½®ä»»åŠ¡ç³»ç»Ÿ"å‘½ä»¤
3. **è”ç³»å¼€å‘è€…**: é€šè¿‡ GitHub Issues åé¦ˆé—®é¢˜
4. **ç¤¾åŒºæ”¯æŒ**: åœ¨ Obsidian ç¤¾åŒºå¯»æ±‚å¸®åŠ©

---

*æœ¬æ–‡æ¡£åŸºäºæ’ä»¶ç‰ˆæœ¬ 1.0.0 ç¼–å†™ï¼Œå¦‚æœ‰æ›´æ–°è¯·å‚è€ƒæœ€æ–°ç‰ˆæœ¬çš„è¯´æ˜æ–‡æ¡£ã€‚*